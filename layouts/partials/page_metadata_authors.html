{{/* Display author list. */}}

{{- $taxonomy := "authors" }}
{{ if .Param $taxonomy }}
  {{ range $index, $value := (.GetTerms $taxonomy) }}
    {{- /* Insert a comma before all but the first author */ -}}
    {{- if gt $index 0 }}, {{ end -}}

    {{ with site.GetPage (printf "authors/%s" $value) }}
      <span class="{{ if .Params.highlight_name }}font-bold{{ end }}">
        {{ if .Params.external_link }}
          <a href="{{ .Params.external_link }}" target="_blank" rel="noopener noreferrer">
            {{ .LinkTitle }}
          </a>
        {{ else if .RelPermalink }}
          <a href="{{ .RelPermalink }}">{{ .LinkTitle }}</a>
        {{ else }}
          {{ .LinkTitle }}
        {{ end }}
      </span>
    {{ else }}
      <span>{{ $value }}</span> <!-- Fallback if the author page does not exist -->
    {{ end }}

    {{- /* Add author notes if available */ -}}
    {{- if isset $.Params "author_notes" -}}
      {{- with (index $.Params.author_notes $index) -}}
        <i class="author-notes fas fa-info-circle" data-toggle="tooltip" title="{{ . }}"></i>
      {{- end }}
    {{- end }}
  {{- end }}
{{- end }}

